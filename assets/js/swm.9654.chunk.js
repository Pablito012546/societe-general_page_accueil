(self.webpackChunk=self.webpackChunk||[]).push([[9654],{59654:function(t,e,n){"use strict";var u=n(2891);function a(){var t=u(n(13912));return a=function(){return t},t}function l(){var t=u(n(26035));return l=function(){return t},t}function o(){var t=u(n(1874));return o=function(){return t},t}function f(){var t=u(n(59062));return f=function(){return t},t}function i(){var t=u(n(34867));return i=function(){return t},t}n(79398)(e,"__esModule",{value:!0}),e.default=void 0;var r,d=u(n(51342)),s=u(n(38679)),c=u(n(36028)),m=u(n(88111)),h=u(n(41330)),p=u(n(96897)),v=u(n(22116)),w={},b={},g=[],C=[],y=function(){return b.$container.hide()},D=function(){y(),h.default.hideOverlay()};function N(t,e,n){var u,a;c.default.ajax({url:h.default.getUrl(m.default.urls.authent_jeton),data:(u=e,a={},h.default.isCDN()?a.jeton_op="auth":(a.jeton=d.default.getJeton(),a.top_code_etoile="1"),null!=u&&"object"===(0,f().default)(u.chgtnivauth)&&void 0!==u.chgtnivauth.cible&&(a.cible=u.chgtnivauth.cible),a),swmIntercept:!1,success:function(e){!function(t,e,n){var u=e||function(){},a=v.default.parseResponseSAS(t);null!=a?("function"==typeof C[a.commun.raison]&&C[a.commun.raison](a),"function"==typeof g[a.commun.statut]&&h.default.isBDDF()&&g[a.commun.statut](a),a.commun.statut===m.default.statut.NOK?h.default.isCDN()?a.commun.raison===m.default.raison.ACCES_BLOQ?((h.default.isCDNAppliPartPro()||h.default.isCDNSiteMobile())&&(0,c.default)(".swm").removeClass("theme-grey").addClass("theme-white"),h.default.showPopinAccessBlocked()):a.commun.raison===m.default.raison.ERR_JETON?((h.default.isCDNAppliPartPro()||h.default.isCDNSiteMobile())&&(0,c.default)(".swm").removeClass("theme-grey").addClass("theme-white"),h.default.showPopinServMomentIndispo()):n():n():u(a)):u(t)}(e,t,n)},error:function(n,u,a){!function(t,e,n,u,a){"timeout"===t.statusText&&"function"==typeof a?(0,o().default)(a,5e3):u(e)}(n,a,0,t,(function(){w.handleAuthent(t,e)}))}})}g[m.default.statut.NOK]=function(){return d.default.resetAllData()},g[m.default.statut.OK]=function(t){(0,c.default)(document).triggerExternal("swm.postchgtnivauth"),d.default.setCodeClientEtoile(t.donnees.code_etoile),d.default.setIdStat(t.donnees.id_stat),d.default.setSessionState(1)};var S=function(t,e,n){var u;b.$body=(0,c.default)("body"),b.$container=(0,c.default)(".swm-popin-wrapper"),b.$popin=(0,c.default)("#oob-popin"),r||(u=(0,c.default)("#templateOobaDisplayProfil")[0].text,r=i().default.template(u)),y();var a=d.default.getJetonNames();if(null!=a){var o;h.default.loadStyles();var f={profils:a},s=(0,c.default)(r(f));b.$popin.html(s);for(var m=0;m<a.length;m++)o="#",o+=a[m],(0,c.default)(o).swmvclick(D),(0,c.default)(o).swmvclick((function(){d.default.setMultiJetonIndex((0,l().default)(this.value,10)),d.default.setMultiIsNewJeton(!1),N(t,e,n)}));(0,c.default)("#oob-btn-droite").swmvclick((function(){h.default.removeSwmContent(),d.default.setMultiJetonIndex(-1),d.default.setMultiIsNewJeton(!0),n()})),(0,c.default)("#swm-popin-btn-fermer").swmvclick(D),b.$container.show()}else p.default.error("[SWM] - Error format Jeton.")};function _(t,e,n){c.default.ajax({url:h.default.getUrl(m.default.urls.page_signature),swmIntercept:!1,success:function(u){var l=(0,c.default)(u);(0,a().default)(l).call(l,".swm-header").remove(),(0,c.default)("#inlinekeyboard").remove(),(0,c.default)(document.body.lastChild).after(l),function(t,e,n){c.default.ajax({url:h.default.getUrl(m.default.urls.ooba.fragment),swmIntercept:!1,success:function(u){var a="#sign-content";(0,c.default)(a).hide(),(0,c.default)("#swm-popin-ombre-lat").html(u),(0,c.default)(a).show(),h.default.showOverlay(),S(t,e,n),(0,c.default)("body").animate({scrollTop:(0,c.default)(a).offset().top-5})}})}(t,e,n)}})}w.handleAuthent=function(t,e,n){return function(t){return!!(h.default.are_cookies_enabled()&&(null!=d.default.getJeton()||h.default.isCDN()&&d.default.isJetonEaiPresent())&&t&&t.chgtnivauth&&t.chgtnivauth.cible)}(e)?(d.default.clearAllDataDerniereConnexion(),s.default.isMultiProfil?_(t,e,n):N(t,e,n),!0):(p.default.debug("[SWM] - Procédure d'authent jeton ignorée."),!1)};var k=w;e.default=k}}]);